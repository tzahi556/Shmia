<!DOCTYPE html>
<html lang="he" ng-app="app">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ניהול עובדים (101)</title>

    <!--<script src="https://code.jquery.com/jquery-3.5.0.js"></script>-->
    <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous">-->

    <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="node_modules/bootstrap-rtl/dist/css/bootstrap-rtl.min.css" rel="stylesheet" />
    <link href="node_modules/angular-loading-bar/build/loading-bar.min.css" rel="stylesheet" />
    <link href="node_modules/font-awesome/css/font-awesome.min.css" rel="stylesheet" />



    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/autocomplete.css" />

    <link rel="stylesheet" href="css/bcPaint.css" />
    <link rel="stylesheet" href="css/demo-page.css" />
    <link rel="stylesheet" href="css/bcPaint.mobile.css" />


    <style>
        [ng\:cloak],
        [ng-cloak],
        [data-ng-cloak],
        [x-ng-cloak],
        .ng-cloak,
        .x-ng-cloak {
            display: none !important;
        }
    </style>

    <link rel="manifest" href="manifest.json">

    <!--<script type='text/javascript'>
        window.smartlook || (function (d) {
            var o = smartlook = function () { o.api.push(arguments) }, h = d.getElementsByTagName('head')[0];
            var c = d.createElement('script'); o.api = new Array(); c.async = true; c.type = 'text/javascript';
            c.charset = 'utf-8'; c.src = 'https://rec.smartlook.com/recorder.js'; h.appendChild(c);
        })(document);
        smartlook('init', '433d545b3af27f860b5329eee8453dc260cc8176');
    </script>-->




</head>

<body>
    <header>
        <div class="navbar navbar-static-top navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">
                        <farm-name></farm-name>  <span style="font-size:0.5em">1.2.1</span>
                    </a>
                </div>
                <navigation></navigation>
            </div>
        </div>
    </header>
    <div ui-view="main" class="container-fluid"></div>
    <common-operations></common-operations>




    <script src="node_modules/jquery/dist/jquery.min.js"></script>

    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="node_modules/angular/angular.js"></script>

    <script src="node_modules/jquery/dist/cook.js"></script>
    <script src="node_modules/angular-ui-router/release/angular-ui-router.js"></script>
    <script src="node_modules/angular-ui-bootstrap/dist/ui-bootstrap.js"></script>
    <script src="node_modules/angular-ui-bootstrap/dist/ui-bootstrap-tpls.js"></script>
    <script src="node_modules/angular-loading-bar/build/loading-bar.js"></script>
    <script src="node_modules/file-saverjs/FileSaver.js"></script>
    <script src="node_modules/xlsx/dist/xlsx.core.min.js"></script>


    <script src="node_modules/moment/moment.js"></script>
    <script src="node_modules/fullcalendar/dist/fullcalendar.js"></script>
    <script src="node_modules/fullcalendar/dist/locale/he.js"></script>
    <script src="node_modules/fullcalendar-scheduler/dist/scheduler.js"></script>


    <script src="css/signature_pad.js"></script>


    <script src="app/app.js?v=4"></script>
    <script src="css/autocomplete.js"></script>
    <script src="css/bcPaint.js"></script>
    <script src="css/jquery.blockUI.js"></script>



    <script src="app/common/components/farmname/farmname.component.js"></script>
    <script src="app/common/values/shared.value.js"></script>
    <script src="app/common/directives/email.validator.directrive.js"></script>
    <script src="app/common/directives/expandable.directive.js"></script>
    <script src="app/common/services/users.service.js"></script>
    <script src="app/common/services/farms.service.js"></script>

    <script src="app/common/services/auth.interceptor.service.js"></script>
    <script src="app/common/services/auth.service.js"></script>

    <script src="app/common/services/files.service.js"></script>
    <script src="app/common/filters/date/date.filter.js"></script>
    <script src="app/common/components/navigation/navigation.component.js"></script>

    <script src="app/farms/farms.component.js?v=3"></script>
    <script src="app/farms/farm.component.js?v=3"></script>
    <script src="app/users/users.component.js?v=3"></script>
    <script src="app/users/user.component.js?v=3"></script>
    <script src="app/aws/awsmangers.component.js"></script>
    <script src="app/aws/bindtodata.component.js"></script>
    <script src="app/aws/awsauto.component.js"></script>
    <script src="app/aws/awspools.component.js"></script>
    <script src="app/awshistory/awsmangershistory.component.js"></script>
    <script src="app/awshistory/awsmangershistoryphrase.component.js"></script>
    <script src="app/workers/workers.component.js"></script>
    <script src="app/workersnew/workers.component.js?v=3"></script>
    <script src="app/workers/worker.component.js?v=3"></script>
    <script src="app/workersnew/workernew.component.js"></script>
    <script src="app/docs/docs.component.js"></script>
    <script src="app/report/reportarea.component.js"></script>
    <script src="app/report/logs.component.js"></script>
    <script src="app/login/login.component.js"></script>

    <script src="css/jquery.inputmask.bundle.js"></script>
    <script src="app/farms/farmmanager.component.js"></script>


    <link href="css/jquery.toast.css" rel="stylesheet" />

    <script src="css/jquery.toast.js"></script>




    <script src="js/pdf.min.js"></script>
    <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>-->
    <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf_viewer.js"></script>-->
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf_viewer.min.css" rel="stylesheet" type="text/css" />-->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>-->
    <!--<script type="text/javascript">





    </script>-->

    <script type="text/javascript" src="css/webToast.js" charset="windows-1255"></script>
    <link href="css/webToast.css" rel="stylesheet" />
    <script type="text/javascript">


        function CallPdfJs(elemId, width, height, url) {


            var CurrentViewport;

            var NumPages = 0;
            var CurrentPage = 1;
            var CurrentPDF;
            // header on that server.
            //  var url = 'https://raw.githubusercontent.com/mozilla/pdf.js/ba2edeae/web/compressed.tracemonkey-pldi-09.pdf';
            // Loaded via <script> tag, create shortcut to access PDF.js exports.
            var { pdfjsLib } = globalThis;

            // The workerSrc property shall be specified.
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min.js';
            // Asynchronous download of PDF
            var loadingTask = pdfjsLib.getDocument(url);
            loadingTask.promise.then(function (pdf) {

                CurrentPDF = pdf;

                NumPages = pdf.numPages;

                pdf.getPage(CurrentPage).then(handlePages);



            }
                , function (reason) {
                    console.error(reason);

                });

            function handlePages(page) {

                // console.log('Page loaded');
                // $("#canvasContainer div").not('#the-canvas').remove();


                //var scale = 1.5;
                //var viewport = page.getViewport({ scale: scale });



                //var canvas = document.getElementById('the-canvas');

                //var context = canvas.getContext('2d');



                //canvas.height = viewport.height;

                //canvas.width =  viewport.width;


                //  var container = document.getElementById('dvSeq');
                var canvas = document.getElementById(elemId);
                var context = canvas.getContext('2d');
                var viewport = page.getViewport({ scale: 1 });
                var scale = width / viewport.width;
                viewport = page.getViewport({ scale: scale });



                viewport.height = height;


                canvas.height = viewport.height - 4;
                canvas.width = viewport.width - 4;



                // Render PDF page into canvas context

                var renderContext = {

                    canvasContext: context,

                    viewport: viewport

                };

                var renderTask = page.render(renderContext);

                renderTask.promise.then(function () {

                    console.log('Page rendered');

                });


                CurrentViewport = viewport;



                //if (CurrentPage == 1)
                //    $("#canvasContainer").append('<div class="draggableOut" style="position: absolute; left: 599px; top: 204px;">שם</div>');

                //$(".draggableOut").draggable({ cursor: "pointer" });


            }


        }

        var CurrentViewport;
        var NumPages = 0;
        var CurrentPage = 1;
        var CurrentPDF;
        var CurrentPDFPage;
        var CurrentScale;
        var elemId;
        var CurrentWidth;
        var CurrentHeight;
        function CallEditPdfJs(elementId, url, width, height) {
            elemId = elementId;


            //$("#canvasContainer div").not('#' + elemId).remove();

            CurrentWidth = width;
            CurrentHeight = height;
            var url = url;
            // Loaded via <script> tag, create shortcut to access PDF.js exports.
            var { pdfjsLib } = globalThis;
            // The workerSrc property shall be specified.
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min.js';
            // Asynchronous download of PDF
            var loadingTask = pdfjsLib.getDocument(url);
            loadingTask.promise.then(function (pdf) {

                console.log('PDF loaded');

                CurrentPage = 1;
                CurrentPDF = pdf;

                NumPages = pdf.numPages;

                $("#spCurTotalPage").text(NumPages);
                $("#spCurPage").text(CurrentPage);



                //Start with first page
                pdf.getPage(CurrentPage).then(handlePages);




            }
                , function (reason) {
                    console.error(reason);

                });







        }

        function handlePages(page) {

            // console.log('Page loaded');


            // for clean all pages
         


            //var scale = 1.5;
            //var viewport = page.getViewport({ scale: scale });

            //var canvas = document.getElementById(elemId);

            //var context = canvas.getContext('2d');



            // נסיון
            var canvas = document.getElementById(elemId);
            var context = canvas.getContext('2d');
            var viewport = page.getViewport({ scale: 1 });

            var scale = CurrentWidth / viewport.width;
            // var scaleY = CurrentHeight / viewport.height;

            // var scale = Math.max(scaleX, scaleY);

            viewport = page.getViewport({ scale: scale });


            canvas.height = viewport.height;

            canvas.width = viewport.width;



            // Render PDF page into canvas context

            var renderContext = {

                canvasContext: context,

                viewport: viewport

            };

            var renderTask = page.render(renderContext);

            renderTask.promise.then(function () {

                console.log('Page rendered');

            });

            CurrentViewport = viewport;
            CurrentPDFPage = page;
            CurrentScale = scale;
            // if currentpage etc///

            //if (CurrentPage == 1)
            //    $("#canvasContainer").append('<div class="draggableOut" style="position: absolute; left: 599px; top: 204px;">שם</div>');

            // $(".draggableOut").draggable({ cursor: "pointer" });

            return "done";

        }


        function convertPixelsToPdfCoords(xPixel, yPixel, sssss) {


         
            // var scale = 1;
            var viewport = CurrentPDFPage.getViewport({ scale: CurrentScale });


            // Get viewport with scale
            //  const viewport = pageView.viewport;

            // Translate screen pixel coordinates to PDF coordinates
            const transform = viewport.transform;

            // Invert the transform matrix to map pixels to PDF space
            const [a, b, c, d, e, f] = transform;

            // Apply inverse transform
            const det = a * d - b * c;
            const xPdf = (d * (xPixel - e) - c * (yPixel - f)) / det;
            const yPdf = (-b * (xPixel - e) + a * (yPixel - f)) / det;

            return { x: xPdf, y: yPdf };
        }







        function changePage(delta) {



            if ((CurrentPage == 1 && delta == -1) || (CurrentPage == NumPages && delta == 1)) {
                return;
            }


            //$('li').removeClass('disabled');

            CurrentPage += delta;

            //if (CurrentPage == 1) {

            //    $('#liPrev').addClass('disabled');

            //}


            //if (CurrentPage == NumPages) {

            //    $('#liNext').addClass('disabled');
            //}

            $('#spCurPage').text(CurrentPage);
            CurrentPDF.getPage(CurrentPage).then(handlePages);

        }

        function alertMessage(mes, type) {






            if (type == 1 || !type) {

                webToast.Success({
                    // REQUIRED
                    status: 'הודעת מערכת',
                    message: mes,
                    align: 'topcenter',
                    // OPTIONAL.
                    // Default: 3000
                    delay: 50000000
                });





                //$.toast({
                //    heading: '<u><b>הודעת מערכת</b></u>',
                //    text: mes,
                //    position: 'mid-center',
                //    hideAfter: false,
                //    showHideTransition: 'plain',
                //    icon: 'success',
                //    beforeShow: function () {
                //        /*  alert('Toast has appeared.');*/
                //        $("#overlay").show();
                //    },
                //    afterHidden: function () {
                //        $("#overlay").hide();
                //        //alert('Toast has been hidden.');
                //    }

                //})



            }

            if (type == 2) {


                webToast.Info({
                    // REQUIRED
                    status: 'הודעת מערכת',
                    message: mes,
                    align: 'topcenter',
                    // OPTIONAL.
                    // Default: 3000
                    delay: 5000000000
                });

                //$.toast({
                //    heading: '<u><b>הודעת מערכת</b></u>',
                //    text: mes,
                //    position: 'mid-center',
                //    hideAfter: false,
                //    showHideTransition: 'plain',
                //    icon: 'info',
                //    beforeShow: function () {
                //        /*  alert('Toast has appeared.');*/
                //        $("#overlay").show();
                //    },
                //    afterHidden: function () {
                //        $("#overlay").hide();
                //        //alert('Toast has been hidden.');
                //    }

                //})
            }

            if (type == 3) {

                webToast.Danger({
                    // REQUIRED
                    status: 'הודעת מערכת',
                    message: mes,
                    align: 'topcenter',
                    // OPTIONAL.
                    // Default: 3000
                    delay: 5000000000
                });



                //$.toast({
                //    heading: '<u><b>הודעת מערכת</b></u>',
                //    text: mes,
                //    position: 'mid-center',
                //    hideAfter: false,
                //    showHideTransition: 'plain',
                //    icon: 'error',

                //    beforeShow: function () {
                //        /*  alert('Toast has appeared.');*/
                //        $("#overlay").show();
                //    },
                //    afterHidden: function () {
                //        $("#overlay").hide();
                //        //alert('Toast has been hidden.');
                //    }
                //})
            }

            if (type == 4) {
                //var confirmBox = webToast.confirm(mes);

                //confirmBox.click(function () {
                //    alert('confirmed Data');

                //})

                return webToast.confirm(mes);
            }


            //$('#hmessage').html(mes);
            //$.blockUI({ message: $('#question'), css: { width: '275px' } });

        }

        //$(function () {


        //        $(".date").datepicker();

        //    });



    </script>

    <!--<div id="question" style="display:none; cursor: default">
        <h3 id="hmessage"></h3>
        <input type="button" class="btn  btn-info" id="yes" value="אישור" onclick="$.unblockUI();" />
    </div>-->




    <div id="overlay"></div>
</body>
<script src="js/jquery-3.7.1.js"></script>
<script src="js/jquery-ui.js"></script>
</html>